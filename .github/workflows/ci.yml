name: è‡ªåŠ¨éªŒæ”¶ (Auto Check)

on: [push]

jobs:
  docker-build-check:
    runs-on: ubuntu-latest
    # è®¾ç½®è¶…æ—¶æ—¶é—´
    # é˜²æ­¢å€™é€‰äººçš„æ„å»ºè„šæœ¬å¡æ­»ï¼ˆå¦‚ä¸‹è½½è¶…å¤§æ–‡ä»¶æˆ–æ­»å¾ªç¯ï¼‰ï¼Œæµªè´¹ä½ çš„ GitHub Actions å…è´¹é¢åº¦
    timeout-minutes: 10 
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      # å…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
      # å¦‚æœç›´æ¥è·‘ docker composeï¼ŒæŠ¥é”™ä¼šå¾ˆéš¾çœ‹ã€‚è¿™æ ·å†™æŠ¥é”™ä¿¡æ¯æ›´äººæ€§åŒ–ã€‚
      - name: ğŸ“‚ æ£€æŸ¥æ ¸å¿ƒæ–‡ä»¶ (File Check)
        run: |
          if [ ! -f "docker-compose.yml" ]; then
            echo "âŒ Critical Error: æ ¹ç›®å½•ä¸‹æœªæ‰¾åˆ° docker-compose.yml æ–‡ä»¶ï¼"
            echo "ğŸ’¡ æç¤ºï¼šæ‰€æœ‰é¢˜ç›®ï¼ˆåŒ…æ‹¬ç§»åŠ¨ç«¯ï¼‰éƒ½å¿…é¡»åŒ…å«åç«¯ Docker é…ç½®ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶ä½ç½®ã€‚"
            exit 1
          fi

      - name: ğŸ” éªŒè¯é…ç½®æœ‰æ•ˆæ€§ (Config Check)
        run: docker compose config
        
      - name: ğŸ—ï¸ æµ‹è¯• Docker æ„å»º (Build Test)
        run: docker compose build